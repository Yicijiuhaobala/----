## 关系型数据库
- 关系型数据库的缺点：
  - 关系型数据库使用模糊查询，左边有通配符，不会走索引，会全表扫描，性能低
  - 关系型数据库提供的功能比较弱 如果以“华为手机”作为条件，查询不出来数据
- 倒排索引
  - 将一段文本按照一定的规则，拆分成不同的词条（term）
  - 将各个文档中的内容，进行分词，形成词条，然后记录词条和数据的唯一标识（id）的对应关系，形成的产物
  - 生成的倒排索引中，词条会排序，形成一颗树形结构，提升词条的查询速度
### ElasticSearch
- 应用场景
  - 搜索：海量数据的查询
  - 日志数据分析
  - 实时数据分析
- Elasticsearch 是没有事务性的，没有物理外键，它负责搜索数据，mysql负责存储数据

### 数据类型
- 简单数据类型
  - 字符串
    - text 会分词 不支持聚合
    - keyword 不会分词，将全部内容作为一个词条，支持聚合
  - 数值
    - long
    - integer
    - short
    - byte 
    - double
    - float
    - half_float
    - scaled_float
  - 布尔值
  
  - 范围类型
    - integer_range float_range long_range double_range date_range
  - 日期
- 复杂数据类型
  - 数组 []
  - 对象 {}
### 分词器
- 将一段文本按照一定逻辑，分析成多个词语的一种工具
- 内置的默认中文分词器，对中文很不友好，一个字一个词
- ik_max_word  细粒度分词  IK 最大化分词
- ik_smart     粗粒度分词  IK 智能分词器
### 查询文档

- es默认使用的分词器是standard 一个字一个词
- 词条查询：term
  - 词条查询不会分析查询条件，只有当词条和查询字符串完全匹配时才匹配搜索
- 全文查询：match
  - 全文查询会分析查询条件，先将查询条件进行分词，然后查询求并集


### Bulk批量操作
- bulk 批量操作是将文档的增删改查一些列操作，通过一次请求全都昨晚，减少网络传输的次数
- term 词条不分词查询 termQuery 词条查询 不会进行分词查询
- match 词条分词查询  matchQuery  会对查询条件进行分词 然后将分词后的查询条件和词条进行等值匹配 默认取并集
- 模糊查询
  - wildcard查询  会对查询条件进行分词 还可以使用通配符
  - regexp查询 正则查询
  - prefix查询 前缀查询
- 范围查询
  - rangeQuery 
- 排序查询
  - sortQuery
- queryString
  - 会对查询条件进行分词
  - 然后将分词后的查询条件和词条进行等值匹配
  - 默认取并集
  - 可以指定多个查询字段
  - simple_query_string 不支持操作字符查询 譬如 and or
- 布尔查询
  - 对多个条件查询进行组合，连接
  - must(and) 条件必须成立
  - must_not(not) 条件必须不成立
  - should(or) 条件可以成立
  - filter 条件必须成立 性能比must高 不会计算得分
- 聚合查询
  - 指标查询 相当于mysql的聚合函数 max min avg sum
  - 桶聚合  相当于mysql的group by操作 不要对text类型的数据进行分组 会失败
- 高亮查询
  - 高亮字段
  - 前缀
  - 后缀